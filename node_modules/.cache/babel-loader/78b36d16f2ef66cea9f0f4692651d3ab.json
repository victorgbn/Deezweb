{"ast":null,"code":"import _toConsumableArray from\"/Users/victorgaubin/Documents/MMi Cours/2/JS JM/TP React Deezer/react-deezweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/victorgaubin/Documents/MMi Cours/2/JS JM/TP React Deezer/react-deezweb/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// import React from 'react';\nimport React,{useState}from'react';import fetchJsonp from'fetch-jsonp';import Track from'./Track';import FavService from'../FavService';function Home(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState('ALBUM_ASC'),_useState4=_slicedToArray(_useState3,2),orderBy=_useState4[0],setOrderBy=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),musics=_useState6[0],setMusics=_useState6[1];function changeTitle(event){setTitle(event.target.value);}function changeOrder(event){setOrderBy(event.target.value);}function changeMusic(event){setMusics(event.target.value);}function onSearch(event){event.preventDefault();// Empêche le navigateur de recharger la page\nvar encodedTitle=encodeURIComponent(title);fetchJsonp(\"https://api.deezer.com/search?q=\".concat(encodedTitle,\"&order=\").concat(orderBy,\"&output=jsonp\")).then(function(res){return res.json();}).then(function(data){return data.data;}).then(function(musics){setMusics(musics);});}function onFavorites(music){FavService.toggleFavorite(music);setMusics(_toConsumableArray(musics));}return React.createElement(\"main\",{className:\"container mt-3\"},React.createElement(\"h1\",null,\"Recherche\"),React.createElement(\"p\",null,\"Recherchez un titre sur Deezer en utilisant le formulaire suivant :\"),React.createElement(\"hr\",null),React.createElement(\"form\",{onSubmit:onSearch},React.createElement(\"div\",{className:\"row\"},\" \",React.createElement(\"label\",{htmlFor:\"searchText\",className:\"col-sm-2 col-form-label text-right\"},\"Titre\\xA0 :\"),React.createElement(\"div\",{className:\"col-sm-4\"},\" \",React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"searchText\",placeholder:\"Eminem, Armin Van Buuren, Rihanna, ...\",onChange:changeTitle}),\" \"),\" \",React.createElement(\"label\",{htmlFor:\"searchText\",className:\"col-sm-2 col-form-label text-right\"},\"Trier par :\"),React.createElement(\"div\",{className:\"col-sm-2\"},\" \",React.createElement(\"select\",{id:\"order\",className:\"custom-select\",onChange:changeOrder},React.createElement(\"option\",{value:\"ALBUM_ASC\"},\"Album\"),React.createElement(\"option\",{value:\"ARTIST_ASC\"},\"Artiste\"),React.createElement(\"option\",{value:\"TRACK_ASC\"},\"Musique\"),React.createElement(\"option\",{value:\"RANKING\"},\"Les plus populaires\"),React.createElement(\"option\",{value:\"RATING_ASC\"},\"Les mieux not\\xE9s\")),\" \"),React.createElement(\"div\",{className:\"col-sm-2 text-right\"},\" \",React.createElement(\"input\",{type:\"submit\",className:\"btn btn-primary\",value:\"Go\"}),\" \"))),React.createElement(\"hr\",null),\" \",React.createElement(\"h2\",null,\"R\\xE9sultats\"),React.createElement(\"div\",{className:\"card-group search-results\"},\" \",musics.map(function(music){return React.createElement(Track,{key:music.id,music:music,onClick:onFavorites,isFavorite:FavService.isFavorite(music)});})));}export default Home;","map":{"version":3,"sources":["/Users/victorgaubin/Documents/MMi Cours/2/JS JM/TP React Deezer/react-deezweb/src/components/Home.jsx"],"names":["React","useState","fetchJsonp","Track","FavService","Home","props","title","setTitle","orderBy","setOrderBy","musics","setMusics","changeTitle","event","target","value","changeOrder","changeMusic","onSearch","preventDefault","encodedTitle","encodeURIComponent","then","res","json","data","onFavorites","music","toggleFavorite","map","id","isFavorite"],"mappings":"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","sourcesContent":["// import React from 'react';\nimport React, {useState}from 'react';\nimport fetchJsonp from 'fetch-jsonp';\nimport Track from './Track';\nimport FavService from '../FavService'\n\nfunction Home(props) {\n\nconst [title,\nsetTitle]=useState('');\nconst [orderBy,\nsetOrderBy]=useState('ALBUM_ASC');\nconst [musics,\nsetMusics]=useState([]);\n\nfunction changeTitle(event) {\nsetTitle(event.target.value);\n}\n\nfunction changeOrder(event) {\nsetOrderBy(event.target.value);\n}\n\nfunction changeMusic(event) {\nsetMusics(event.target.value);\n}\n\nfunction onSearch(event) {\n    event.preventDefault(); // Empêche le navigateur de recharger la page\n    const encodedTitle = encodeURIComponent(title);\n    fetchJsonp(\n`https://api.deezer.com/search?q=${encodedTitle}&order=${orderBy}&output=jsonp`\n    )\n    .then(res => res.json())\n    .then(data => data.data)\n    .then(musics => {\n        setMusics(musics);\n    });\n}\n\nfunction onFavorites(music) {\n    FavService.toggleFavorite(music);\n    setMusics([...musics]);\n}\n\n\nreturn (<main className=\"container mt-3\">\n    <h1>Recherche</h1>\n    <p>Recherchez un titre sur Deezer en utilisant le formulaire suivant :</p>\n    <hr />\n    <form onSubmit={ onSearch }>\n        <div className=\"row\"> <label htmlFor=\"searchText\" className=\"col-sm-2 col-form-label text-right\">Titre&nbsp;\n                :</label>\n            <div className=\"col-sm-4\"> <input type=\"text\" className=\"form-control\" id=\"searchText\"\n                    placeholder=\"Eminem, Armin Van Buuren, Rihanna, ...\" onChange={ changeTitle } /> </div> <label\n                htmlFor=\"searchText\" className=\"col-sm-2 col-form-label text-right\">Trier par :</label>\n            <div className=\"col-sm-2\"> <select id=\"order\" className=\"custom-select\" onChange={ changeOrder }>\n                    <option value=\"ALBUM_ASC\">Album</option>\n                    <option value=\"ARTIST_ASC\">Artiste</option>\n                    <option value=\"TRACK_ASC\">Musique</option>\n                    <option value=\"RANKING\">Les plus populaires</option>\n                    <option value=\"RATING_ASC\">Les mieux notés</option>\n                </select> </div>\n            <div className=\"col-sm-2 text-right\"> <input type=\"submit\" className=\"btn btn-primary\" value=\"Go\" /> </div>\n        </div>\n    </form>\n    <hr /> {\n    /* <h3>Aucun résultat pour cette recherche ...</h3> */\n    }\n\n    <h2>Résultats</h2>\n    <div className=\"card-group search-results\"> {\n        musics.map(music => {\n        return (\n            <Track key={music.id} music={music} onClick={onFavorites} isFavorite={FavService.isFavorite(music)} />\n        );\n        })}\n    </div>\n</main>);\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}