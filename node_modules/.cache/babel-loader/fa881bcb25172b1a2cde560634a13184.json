{"ast":null,"code":"(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['exports', 'module'], factory);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    factory(exports, module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, mod);\n    global.fetchJsonp = mod.exports;\n  }\n})(this, function (exports, module) {\n  'use strict';\n\n  var defaultOptions = {\n    timeout: 5000,\n    jsonpCallback: 'callback',\n    jsonpCallbackFunction: null\n  };\n\n  function generateCallbackFunction() {\n    return 'jsonp_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n  }\n\n  function clearFunction(functionName) {\n    // IE8 throws an exception when you try to delete a property on window\n    // http://stackoverflow.com/a/1824228/751089\n    try {\n      delete window[functionName];\n    } catch (e) {\n      window[functionName] = undefined;\n    }\n  }\n\n  function removeScript(scriptId) {\n    var script = document.getElementById(scriptId);\n\n    if (script) {\n      document.getElementsByTagName('head')[0].removeChild(script);\n    }\n  }\n\n  function fetchJsonp(_url) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1]; // to avoid param reassign\n\n    var url = _url;\n    var timeout = options.timeout || defaultOptions.timeout;\n    var jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;\n    var timeoutId = undefined;\n    return new Promise(function (resolve, reject) {\n      var callbackFunction = options.jsonpCallbackFunction || generateCallbackFunction();\n      var scriptId = jsonpCallback + '_' + callbackFunction;\n\n      window[callbackFunction] = function (response) {\n        resolve({\n          ok: true,\n          // keep consistent with fetch API\n          json: function json() {\n            return Promise.resolve(response);\n          }\n        });\n        if (timeoutId) clearTimeout(timeoutId);\n        removeScript(scriptId);\n        clearFunction(callbackFunction);\n      }; // Check if the user set their own params, and if not add a ? to start a list of params\n\n\n      url += url.indexOf('?') === -1 ? '?' : '&';\n      var jsonpScript = document.createElement('script');\n      jsonpScript.setAttribute('src', '' + url + jsonpCallback + '=' + callbackFunction);\n\n      if (options.charset) {\n        jsonpScript.setAttribute('charset', options.charset);\n      }\n\n      jsonpScript.id = scriptId;\n      document.getElementsByTagName('head')[0].appendChild(jsonpScript);\n      timeoutId = setTimeout(function () {\n        reject(new Error('JSONP request to ' + _url + ' timed out'));\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n\n        window[callbackFunction] = function () {\n          clearFunction(callbackFunction);\n        };\n      }, timeout); // Caught if got 404/500\n\n      jsonpScript.onerror = function () {\n        reject(new Error('JSONP request to ' + _url + ' failed'));\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        if (timeoutId) clearTimeout(timeoutId);\n      };\n    });\n  } // export as global function\n\n  /*\n  let local;\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n  local.fetchJsonp = fetchJsonp;\n  */\n\n\n  module.exports = fetchJsonp;\n});","map":{"version":3,"sources":["/Users/victorgaubin/Documents/MMi Cours/2/JS JM/TP React Deezer/react-deezweb/node_modules/fetch-jsonp/build/fetch-jsonp.js"],"names":["global","factory","define","amd","exports","module","mod","fetchJsonp","defaultOptions","timeout","jsonpCallback","jsonpCallbackFunction","generateCallbackFunction","Date","now","Math","ceil","random","clearFunction","functionName","window","e","undefined","removeScript","scriptId","script","document","getElementById","getElementsByTagName","removeChild","_url","options","arguments","length","url","timeoutId","Promise","resolve","reject","callbackFunction","response","ok","json","clearTimeout","indexOf","jsonpScript","createElement","setAttribute","charset","id","appendChild","setTimeout","Error","onerror"],"mappings":"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","sourcesContent":["(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['exports', 'module'], factory);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    factory(exports, module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, mod);\n    global.fetchJsonp = mod.exports;\n  }\n})(this, function (exports, module) {\n  'use strict';\n\n  var defaultOptions = {\n    timeout: 5000,\n    jsonpCallback: 'callback',\n    jsonpCallbackFunction: null\n  };\n\n  function generateCallbackFunction() {\n    return 'jsonp_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n  }\n\n  function clearFunction(functionName) {\n    // IE8 throws an exception when you try to delete a property on window\n    // http://stackoverflow.com/a/1824228/751089\n    try {\n      delete window[functionName];\n    } catch (e) {\n      window[functionName] = undefined;\n    }\n  }\n\n  function removeScript(scriptId) {\n    var script = document.getElementById(scriptId);\n    if (script) {\n      document.getElementsByTagName('head')[0].removeChild(script);\n    }\n  }\n\n  function fetchJsonp(_url) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    // to avoid param reassign\n    var url = _url;\n    var timeout = options.timeout || defaultOptions.timeout;\n    var jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;\n\n    var timeoutId = undefined;\n\n    return new Promise(function (resolve, reject) {\n      var callbackFunction = options.jsonpCallbackFunction || generateCallbackFunction();\n      var scriptId = jsonpCallback + '_' + callbackFunction;\n\n      window[callbackFunction] = function (response) {\n        resolve({\n          ok: true,\n          // keep consistent with fetch API\n          json: function json() {\n            return Promise.resolve(response);\n          }\n        });\n\n        if (timeoutId) clearTimeout(timeoutId);\n\n        removeScript(scriptId);\n\n        clearFunction(callbackFunction);\n      };\n\n      // Check if the user set their own params, and if not add a ? to start a list of params\n      url += url.indexOf('?') === -1 ? '?' : '&';\n\n      var jsonpScript = document.createElement('script');\n      jsonpScript.setAttribute('src', '' + url + jsonpCallback + '=' + callbackFunction);\n      if (options.charset) {\n        jsonpScript.setAttribute('charset', options.charset);\n      }\n      jsonpScript.id = scriptId;\n      document.getElementsByTagName('head')[0].appendChild(jsonpScript);\n\n      timeoutId = setTimeout(function () {\n        reject(new Error('JSONP request to ' + _url + ' timed out'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        window[callbackFunction] = function () {\n          clearFunction(callbackFunction);\n        };\n      }, timeout);\n\n      // Caught if got 404/500\n      jsonpScript.onerror = function () {\n        reject(new Error('JSONP request to ' + _url + ' failed'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        if (timeoutId) clearTimeout(timeoutId);\n      };\n    });\n  }\n\n  // export as global function\n  /*\n  let local;\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n  local.fetchJsonp = fetchJsonp;\n  */\n\n  module.exports = fetchJsonp;\n});"]},"metadata":{},"sourceType":"script"}